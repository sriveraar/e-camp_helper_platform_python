{% extends "base.html" %}

{% block content %}
<h2>Mi cuenta</h2>
<form method="post" enctype="multipart/form-data">
    {% csrf_token %}
    {{ form.as_p }}
    <button type="submit">Guardar cambios</button>
</form>

<h3>Servicios seleccionados</h3>
<ul>
    {% for service in provider.services.all %}
        <li class="bg-success text-white p-2">{{ service.name }}</li>
    {% empty %}
        <li>No has seleccionado servicios a√∫n.</li>
    {% endfor %}
</ul>

<h3>Servicios disponibles</h3>
<ul>
    {% for service in available_services %}
        <li>
            <label>
                <input type="checkbox" name="services" value="{{ service.id }}" 
                    {% if service in provider.services.all %} checked {% endif %}>
                {{ service.name }}
            </label>
        </li>
    {% endfor %}
</ul>

<h3>Mensajes recibidos</h3>
<ul>
    {% for message in messages %}
        <li>
            <strong>{{ message.sender_name }}</strong>: {{ message.content }}
            <small>{{ message.created_at }}</small>
        </li>
    {% endfor %}
</ul>
{% endblock %}
